<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
<div id="readme" class="markdown">
      <h1 id="user-content-express-session" class="deep-link package-name-redundant"><a href="#express-session">express-session</a></h1>
<p><a href="https://npmjs.org/package/express-session"><img src="https://img.shields.io/npm/v/express-session.svg" class="badge"></a>
<a href="https://npmjs.org/package/express-session"><img src="https://img.shields.io/npm/dm/express-session.svg" class="badge"></a>
<a href="https://travis-ci.org/expressjs/session"><img src="https://img.shields.io/travis/expressjs/session/master.svg" class="badge"></a>
<a href="https://coveralls.io/r/expressjs/session?branch=master"><img src="https://img.shields.io/coveralls/expressjs/session/master.svg" class="badge"></a>
<a href="https://gratipay.com/dougwilson/"><img src="https://img.shields.io/gratipay/dougwilson.svg" class="badge"></a></p>
<h2 id="user-content-installation" class="deep-link"><a href="#installation">Installation</a></h2>
<div class="highlight bash"><pre class="editor editor-colors"><div class="line"><span class="text"><span>$&nbsp;npm&nbsp;install&nbsp;express-session</span></span></div></pre></div>
<h2 id="user-content-api" class="deep-link"><a href="#api">API</a></h2>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>var</span></span><span>&nbsp;session&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>express-session</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre></div>
<h3 id="user-content-sessionoptions" class="deep-link"><a href="#sessionoptions">session(options)</a></h3>
<p>Create a session middleware with the given <code>options</code>.</p>
<p><strong>Note</strong> Session data is <em>not</em> saved in the cookie itself, just the session ID.
Session data is stored server-side.</p>
<p><strong>Note</strong> Since version 1.5.0, the <a href="https://www.npmjs.com/package/cookie-parser"><code>cookie-parser</code> middleware</a>
no longer needs to be used for this module to work. This module now directly reads
and writes cookies on <code>req</code>/<code>res</code>. Using <code>cookie-parser</code> may result in issues
if the <code>secret</code> is not the same between this module and <code>cookie-parser</code>.</p>
<p><strong>Warning</strong> The default server-side session storage, <code>MemoryStore</code>, is <em>purposely</em>
not designed for a production environment. It will leak memory under most
conditions, does not scale past a single process, and is meant for debugging and
developing.</p>
<p>For a list of stores, see <a href="#compatible-session-stores">compatible session stores</a>.</p>
<h4 id="user-content-options" class="deep-link"><a href="#options">Options</a></h4>
<p><code>express-session</code> accepts these properties in the options object.</p>
<h5 id="user-content-cookie" class="deep-link"><a href="#cookie">cookie</a></h5>
<p>Settings object for the session ID cookie. The default value is
<code>{ path: '/', httpOnly: true, secure: false, maxAge: null }</code>.</p>
<p>The following are options that can be set in this object.</p>
<h5 id="user-content-cookiedomain" class="deep-link"><a href="#cookiedomain">cookie.domain</a></h5>
<p>Specifies the value for the <code>Domain</code> <code>Set-Cookie</code> attribute. By default, no domain
is set, and most clients will consider the cookie to apply to only the current
domain.</p>
<h5 id="user-content-cookieexpires" class="deep-link"><a href="#cookieexpires">cookie.expires</a></h5>
<p>Specifies the <code>Date</code> object to be the value for the <code>Expires</code> <code>Set-Cookie</code> attribute.
By default, no expiration is set, and most clients will consider this a
"non-persistent cookie" and will delete it on a condition like exiting a web browser
application.</p>
<p><strong>Note</strong> If both <code>expires</code> and <code>maxAge</code> are set in the options, then the last one
defined in the object is what is used.</p>
<p><strong>Note</strong> The <code>expires</code> option should not be set directly; instead only use the <code>maxAge</code>
option.</p>
<h5 id="user-content-cookiehttponly" class="deep-link"><a href="#cookiehttponly">cookie.httpOnly</a></h5>
<p>Specifies the <code>boolean</code> value for the <code>HttpOnly</code> <code>Set-Cookie</code> attribute. When truthy,
the <code>HttpOnly</code> attribute is set, otherwise it is not. By default, the <code>HttpOnly</code>
attribute is set.</p>
<p><strong>Note</strong> be careful when setting this to <code>true</code>, as compliant clients will not allow
client-side JavaScript to see the cookie in <code>document.cookie</code>.</p>
<h5 id="user-content-cookiemaxage" class="deep-link"><a href="#cookiemaxage">cookie.maxAge</a></h5>
<p>Specifies the <code>number</code> (in milliseconds) to use when calculating the <code>Expires</code>
<code>Set-Cookie</code> attribute. This is done by taking the current server time and adding
<code>maxAge</code> milliseconds to the value to calculate an <code>Expires</code> datetime. By default,
no maximum age is set.</p>
<p><strong>Note</strong> If both <code>expires</code> and <code>maxAge</code> are set in the options, then the last one
defined in the object is what is used.</p>
<h5 id="user-content-cookiepath" class="deep-link"><a href="#cookiepath">cookie.path</a></h5>
<p>Specifies the value for the <code>Path</code> <code>Set-Cookie</code>. By default, this is set to <code>'/'</code>, which
is the root path of the domain.</p>
<h5 id="user-content-cookiesamesite" class="deep-link"><a href="#cookiesamesite">cookie.sameSite</a></h5>
<p>Specifies the <code>boolean</code> or <code>string</code> to be the value for the <code>SameSite</code> <code>Set-Cookie</code> attribute.</p>
<ul>
<li><code>true</code> will set the <code>SameSite</code> attribute to <code>Strict</code> for strict same site enforcement.</li>
<li><code>false</code> will not set the <code>SameSite</code> attribute.</li>
<li><code>'lax'</code> will set the <code>SameSite</code> attribute to <code>Lax</code> for lax same site enforcement.</li>
<li><code>'strict'</code> will set the <code>SameSite</code> attribute to <code>Strict</code> for strict same site enforcement.</li>
</ul>
<p>More information about the different enforcement levels can be found in the specification
<a href="https://tools.ietf.org/html/draft-west-first-party-cookies-07#section-4.1.1">https://tools.ietf.org/html/draft-west-first-party-cookies-07#section-4.1.1</a></p>
<p><strong>Note</strong> This is an attribute that has not yet been fully standardized, and may change in
the future. This also means many clients may ignore this attribute until they understand it.</p>
<h5 id="user-content-cookiesecure" class="deep-link"><a href="#cookiesecure">cookie.secure</a></h5>
<p>Specifies the <code>boolean</code> value for the <code>Secure</code> <code>Set-Cookie</code> attribute. When truthy,
the <code>Secure</code> attribute is set, otherwise it is not. By default, the <code>Secure</code>
attribute is not set.</p>
<p><strong>Note</strong> be careful when setting this to <code>true</code>, as compliant clients will not send
the cookie back to the server in the future if the browser does not have an HTTPS
connection.</p>
<p>Please note that <code>secure: true</code> is a <strong>recommended</strong> option. However, it requires
an https-enabled website, i.e., HTTPS is necessary for secure cookies. If <code>secure</code>
is set, and you access your site over HTTP, the cookie will not be set. If you
have your node.js behind a proxy and are using <code>secure: true</code>, you need to set
"trust proxy" in express:</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>var</span></span><span>&nbsp;app&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>express</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>app</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>set</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>trust&nbsp;proxy</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;trust&nbsp;first&nbsp;proxy</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>app</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>use</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta function-call js"><span class="entity name function js"><span>session</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span>&nbsp;&nbsp;secret</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>keyboard&nbsp;cat</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span>&nbsp;&nbsp;resave</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span>&nbsp;&nbsp;saveUninitialized</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span>&nbsp;&nbsp;cookie</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;secure</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre></div>
<p>For using secure cookies in production, but allowing for testing in development,
the following is an example of enabling this setup based on <code>NODE_ENV</code> in express:</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>var</span></span><span>&nbsp;app&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>express</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>var</span></span><span>&nbsp;sess&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;secret</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>keyboard&nbsp;cat</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;cookie</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>app</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>get</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>env</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>production</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>app</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>set</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>trust&nbsp;proxy</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;trust&nbsp;first&nbsp;proxy</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>sess</span></span><span class="meta delimiter period js"><span>.</span></span><span class="support constant dom js"><span>cookie</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>secure</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;serve&nbsp;secure&nbsp;cookies</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>app</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>use</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta function-call js"><span class="entity name function js"><span>session</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>sess</span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre></div>
<p>The <code>cookie.secure</code> option can also be set to the special value <code>'auto'</code> to have
this setting automatically match the determined security of the connection. Be
careful when using this setting if the site is available both as HTTP and HTTPS,
as once the cookie is set on HTTPS, it will no longer be visible over HTTP. This
is useful when the Express <code>"trust proxy"</code> setting is properly setup to simplify
development vs production configuration.</p>
<h5 id="user-content-genid" class="deep-link"><a href="#genid">genid</a></h5>
<p>Function to call to generate a new session ID. Provide a function that returns
a string that will be used as a session ID. The function is given <code>req</code> as the
first argument if you want to use some value attached to <code>req</code> when generating
the ID.</p>
<p>The default value is a function which uses the <code>uid-safe</code> library to generate IDs.</p>
<p><strong>NOTE</strong> be careful to generate unique IDs so your sessions do not conflict.</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>app</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>use</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta function-call js"><span class="entity name function js"><span>session</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>genid</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable function js"><span>req</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function begin curly js"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>genuuid</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;use&nbsp;UUIDs&nbsp;for&nbsp;session&nbsp;IDs</span><span>&nbsp;</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function end curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span>&nbsp;&nbsp;secret</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>keyboard&nbsp;cat</span><span class="punctuation definition string end js"><span>'</span></span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre></div>
<h5 id="user-content-name" class="deep-link"><a href="#name">name</a></h5>
<p>The name of the session ID cookie to set in the response (and read from in the
request).</p>
<p>The default value is <code>'connect.sid'</code>.</p>
<p><strong>Note</strong> if you have multiple apps running on the same hostname (this is just
the name, i.e. <code>localhost</code> or <code>127.0.0.1</code>; different schemes and ports do not
name a different hostname), then you need to separate the session cookies from
each other. The simplest method is to simply set different <code>name</code>s per app.</p>
<h5 id="user-content-proxy" class="deep-link"><a href="#proxy">proxy</a></h5>
<p>Trust the reverse proxy when setting secure cookies (via the "X-Forwarded-Proto"
header).</p>
<p>The default value is <code>undefined</code>.</p>
<ul>
<li><code>true</code> The "X-Forwarded-Proto" header will be used.</li>
<li><code>false</code> All headers are ignored and the connection is considered secure only
if there is a direct TLS/SSL connection.</li>
<li><code>undefined</code> Uses the "trust proxy" setting from express</li>
</ul>
<h5 id="user-content-resave" class="deep-link"><a href="#resave">resave</a></h5>
<p>Forces the session to be saved back to the session store, even if the session
was never modified during the request. Depending on your store this may be
necessary, but it can also create race conditions where a client makes two
parallel requests to your server and changes made to the session in one
request may get overwritten when the other request ends, even if it made no
changes (this behavior also depends on what store you're using).</p>
<p>The default value is <code>true</code>, but using the default has been deprecated,
as the default will change in the future. Please research into this setting
and choose what is appropriate to your use-case. Typically, you'll want
<code>false</code>.</p>
<p>How do I know if this is necessary for my store? The best way to know is to
check with your store if it implements the <code>touch</code> method. If it does, then
you can safely set <code>resave: false</code>. If it does not implement the <code>touch</code>
method and your store sets an expiration date on stored sessions, then you
likely need <code>resave: true</code>.</p>
<h5 id="user-content-rolling" class="deep-link"><a href="#rolling">rolling</a></h5>
<p>Force a session identifier cookie to be set on every response. The expiration
is reset to the original <a href="#cookiemaxage"><code>maxAge</code></a>, resetting the expiration
countdown.</p>
<p>The default value is <code>false</code>.</p>
<p><strong>Note</strong> When this option is set to <code>true</code> but the <code>saveUninitialized</code> option is
set to <code>false</code>, the cookie will not be set on a response with an uninitialized
session.</p>
<h5 id="user-content-saveuninitialized" class="deep-link"><a href="#saveuninitialized">saveUninitialized</a></h5>
<p>Forces a session that is "uninitialized" to be saved to the store. A session is
uninitialized when it is new but not modified. Choosing <code>false</code> is useful for
implementing login sessions, reducing server storage usage, or complying with
laws that require permission before setting a cookie. Choosing <code>false</code> will also
help with race conditions where a client makes multiple parallel requests
without a session.</p>
<p>The default value is <code>true</code>, but using the default has been deprecated, as the
default will change in the future. Please research into this setting and
choose what is appropriate to your use-case.</p>
<p><strong>Note</strong> if you are using Session in conjunction with PassportJS, Passport
will add an empty Passport object to the session for use after a user is
authenticated, which will be treated as a modification to the session, causing
it to be saved. <em>This has been fixed in PassportJS 0.3.0</em></p>
<h5 id="user-content-secret" class="deep-link"><a href="#secret">secret</a></h5>
<p><strong>Required option</strong></p>
<p>This is the secret used to sign the session ID cookie. This can be either a string
for a single secret, or an array of multiple secrets. If an array of secrets is
provided, only the first element will be used to sign the session ID cookie, while
all the elements will be considered when verifying the signature in requests.</p>
<h5 id="user-content-store" class="deep-link"><a href="#store">store</a></h5>
<p>The session store instance, defaults to a new <code>MemoryStore</code> instance.</p>
<h5 id="user-content-unset" class="deep-link"><a href="#unset">unset</a></h5>
<p>Control the result of unsetting <code>req.session</code> (through <code>delete</code>, setting to <code>null</code>,
etc.).</p>
<p>The default value is <code>'keep'</code>.</p>
<ul>
<li><code>'destroy'</code> The session will be destroyed (deleted) when the response ends.</li>
<li><code>'keep'</code> The session in the store will be kept, but modifications made during
the request are ignored and not saved.</li>
</ul>
<h3 id="user-content-reqsession" class="deep-link"><a href="#reqsession">req.session</a></h3>
<p>To store or access session data, simply use the request property <code>req.session</code>,
which is (generally) serialized as JSON by the store, so nested objects
are typically fine. For example below is a user-specific view counter:</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Use&nbsp;the&nbsp;session&nbsp;middleware</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>app</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>use</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta function-call js"><span class="entity name function js"><span>session</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;secret</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>keyboard&nbsp;cat</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;cookie</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;maxAge</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>60000</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Access&nbsp;the&nbsp;session&nbsp;as&nbsp;req.session</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>app</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>get</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>/</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable function js"><span>req</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable function js"><span>res</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable function js"><span>next</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function begin curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="storage type js"><span>var</span></span><span>&nbsp;sess&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>req</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>session</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>sess</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>views</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>sess</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>views</span></span><span class="keyword operator js"><span>++</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>res</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>setHeader</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>Content-Type</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>text/html</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>res</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>write</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>&lt;p&gt;views:&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="variable other object js"><span>sess</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>views</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>&lt;/p&gt;</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>res</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>write</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>&lt;p&gt;expires&nbsp;in:&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>sess</span></span><span class="meta delimiter period js"><span>.</span></span><span class="support constant dom js"><span>cookie</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>maxAge</span></span><span>&nbsp;</span><span class="keyword operator js"><span>/</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1000</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>s&lt;/p&gt;</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>res</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>end</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>sess</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>views</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>res</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>end</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>welcome&nbsp;to&nbsp;the&nbsp;session&nbsp;demo.&nbsp;refresh!</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation definition function end curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre></div>
<h4 id="user-content-sessionregeneratecallback" class="deep-link"><a href="#sessionregeneratecallback">Session.regenerate(callback)</a></h4>
<p>To regenerate the session simply invoke the method. Once complete,
a new SID and <code>Session</code> instance will be initialized at <code>req.session</code>
and the <code>callback</code> will be invoked.</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>req</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>session</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>regenerate</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function begin curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;will&nbsp;have&nbsp;a&nbsp;new&nbsp;session&nbsp;here</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation definition function end curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre></div>
<h4 id="user-content-sessiondestroycallback" class="deep-link"><a href="#sessiondestroycallback">Session.destroy(callback)</a></h4>
<p>Destroys the session and will unset the <code>req.session</code> property.
Once complete, the <code>callback</code> will be invoked.</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>req</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>session</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>destroy</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function begin curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;cannot&nbsp;access&nbsp;session&nbsp;here</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation definition function end curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre></div>
<h4 id="user-content-sessionreloadcallback" class="deep-link"><a href="#sessionreloadcallback">Session.reload(callback)</a></h4>
<p>Reloads the session data from the store and re-populates the
<code>req.session</code> object. Once complete, the <code>callback</code> will be invoked.</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>req</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>session</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>reload</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function begin curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;session&nbsp;updated</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation definition function end curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre></div>
<h4 id="user-content-sessionsavecallback" class="deep-link"><a href="#sessionsavecallback">Session.save(callback)</a></h4>
<p>Save the session back to the store, replacing the contents on the store with the
contents in memory (though a store may do something else--consult the store's
documentation for exact behavior).</p>
<p>This method is automatically called at the end of the HTTP response if the
session data has been altered (though this behavior can be altered with various
options in the middleware constructor). Because of this, typically this method
does not need to be called.</p>
<p>There are some cases where it is useful to call this method, for example, long-
lived requests or in WebSockets.</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>req</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>session</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>save</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function begin curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;session&nbsp;saved</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation definition function end curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre></div>
<h4 id="user-content-sessiontouch" class="deep-link"><a href="#sessiontouch">Session.touch()</a></h4>
<p>Updates the <code>.maxAge</code> property. Typically this is
not necessary to call, as the session middleware does this for you.</p>
<h3 id="user-content-reqsessionid" class="deep-link"><a href="#reqsessionid">req.session.id</a></h3>
<p>Each session has a unique ID associated with it. This property will
contain the session ID and cannot be modified.</p>
<h3 id="user-content-reqsessioncookie" class="deep-link"><a href="#reqsessioncookie">req.session.cookie</a></h3>
<p>Each session has a unique cookie object accompany it. This allows
you to alter the session cookie per visitor. For example we can
set <code>req.session.cookie.expires</code> to <code>false</code> to enable the cookie
to remain for only the duration of the user-agent.</p>
<h4 id="user-content-cookiemaxage-1" class="deep-link"><a href="#cookiemaxage-1">Cookie.maxAge</a></h4>
<p>Alternatively <code>req.session.cookie.maxAge</code> will return the time
remaining in milliseconds, which we may also re-assign a new value
to adjust the <code>.expires</code> property appropriately. The following
are essentially equivalent</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>var</span></span><span>&nbsp;hour&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>3600000</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>req</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>session</span></span><span class="meta delimiter period js"><span>.</span></span><span class="support constant dom js"><span>cookie</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>expires</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Date</span></span></span><span class="meta brace round js"><span>(</span></span><span class="support class js"><span>Date</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>now</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;hour</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>req</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>session</span></span><span class="meta delimiter period js"><span>.</span></span><span class="support constant dom js"><span>cookie</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>maxAge</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;hour</span></span></div></pre></div>
<p>For example when <code>maxAge</code> is set to <code>60000</code> (one minute), and 30 seconds
has elapsed it will return <code>30000</code> until the current request has completed,
at which time <code>req.session.touch()</code> is called to reset <code>req.session.maxAge</code>
to its original value.</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>req</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>session</span></span><span class="meta delimiter period js"><span>.</span></span><span class="support constant dom js"><span>cookie</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>maxAge</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;=&gt;&nbsp;30000</span><span>&nbsp;</span></span></span></div></pre></div>
<h3 id="user-content-reqsessionid-1" class="deep-link"><a href="#reqsessionid-1">req.sessionID</a></h3>
<p>To get the ID of the loaded session, access the request property
<code>req.sessionID</code>. This is simply a read-only value set when a session
is loaded/created.</p>
<h2 id="user-content-session-store-implementation" class="deep-link"><a href="#session-store-implementation">Session Store Implementation</a></h2>
<p>Every session store <em>must</em> be an <code>EventEmitter</code> and implement specific
methods. The following methods are the list of <strong>required</strong>, <strong>recommended</strong>,
and <strong>optional</strong>.</p>
<ul>
<li>Required methods are ones that this module will always call on the store.</li>
<li>Recommended methods are ones that this module will call on the store if
available.</li>
<li>Optional methods are ones this module does not call at all, but helps
present uniform stores to users.</li>
</ul>
<p>For an example implementation view the <a href="http://github.com/visionmedia/connect-redis">connect-redis</a> repo.</p>
<h3 id="user-content-storeallcallback" class="deep-link"><a href="#storeallcallback">store.all(callback)</a></h3>
<p><strong>Optional</strong></p>
<p>This optional method is used to get all sessions in the store as an array. The
<code>callback</code> should be called as <code>callback(error, sessions)</code>.</p>
<h3 id="user-content-storedestroysid-callback" class="deep-link"><a href="#storedestroysid-callback">store.destroy(sid, callback)</a></h3>
<p><strong>Required</strong></p>
<p>This required method is used to destroy/delete a session from the store given
a session ID (<code>sid</code>). The <code>callback</code> should be called as <code>callback(error)</code> once
the session is destroyed.</p>
<h3 id="user-content-storeclearcallback" class="deep-link"><a href="#storeclearcallback">store.clear(callback)</a></h3>
<p><strong>Optional</strong></p>
<p>This optional method is used to delete all sessions from the store. The
<code>callback</code> should be called as <code>callback(error)</code> once the store is cleared.</p>
<h3 id="user-content-storelengthcallback" class="deep-link"><a href="#storelengthcallback">store.length(callback)</a></h3>
<p><strong>Optional</strong></p>
<p>This optional method is used to get the count of all sessions in the store.
The <code>callback</code> should be called as <code>callback(error, len)</code>.</p>
<h3 id="user-content-storegetsid-callback" class="deep-link"><a href="#storegetsid-callback">store.get(sid, callback)</a></h3>
<p><strong>Required</strong></p>
<p>This required method is used to get a session from the store given a session
ID (<code>sid</code>). The <code>callback</code> should be called as <code>callback(error, session)</code>.</p>
<p>The <code>session</code> argument should be a session if found, otherwise <code>null</code> or
<code>undefined</code> if the session was not found (and there was no error). A special
case is made when <code>error.code === 'ENOENT'</code> to act like <code>callback(null, null)</code>.</p>
<h3 id="user-content-storesetsid-session-callback" class="deep-link"><a href="#storesetsid-session-callback">store.set(sid, session, callback)</a></h3>
<p><strong>Required</strong></p>
<p>This required method is used to upsert a session into the store given a
session ID (<code>sid</code>) and session (<code>session</code>) object. The callback should be
called as <code>callback(error)</code> once the session has been set in the store.</p>
<h3 id="user-content-storetouchsid-session-callback" class="deep-link"><a href="#storetouchsid-session-callback">store.touch(sid, session, callback)</a></h3>
<p><strong>Recommended</strong></p>
<p>This recommended method is used to "touch" a given session given a
session ID (<code>sid</code>) and session (<code>session</code>) object. The <code>callback</code> should be
called as <code>callback(error)</code> once the session has been touched.</p>
<p>This is primarily used when the store will automatically delete idle sessions
and this method is used to signal to the store the given session is active,
potentially resetting the idle timer.</p>
<h2 id="user-content-compatible-session-stores" class="deep-link"><a href="#compatible-session-stores">Compatible Session Stores</a></h2>
<p>The following modules implement a session store that is compatible with this
module. Please make a PR to add additional modules :)</p>
<p><a href="https://www.npmjs.com/package/aerospike-session-store"><img src="https://img.shields.io/github/stars/aerospike/aerospike-session-store-expressjs.svg?label=%E2%98%85" class="badge"> aerospike-session-store</a> A session store using <a href="http://www.aerospike.com/">Aerospike</a>.</p>
<p><a href="https://www.npmjs.com/package/cassandra-store"><img src="https://img.shields.io/github/stars/webcc/cassandra-store.svg?label=%E2%98%85" class="badge"> cassandra-store</a> An Apache Cassandra-based session store.</p>
<p><a href="https://www.npmjs.com/package/cluster-store"><img src="https://img.shields.io/github/stars/coolaj86/cluster-store.svg?label=%E2%98%85" class="badge"> cluster-store</a> A wrapper for using in-process / embedded
stores - such as SQLite (via knex), leveldb, files, or memory - with node cluster (desirable for Raspberry Pi 2
and other multi-core embedded devices).</p>
<p><a href="https://www.npmjs.com/package/connect-azuretables"><img src="https://img.shields.io/github/stars/mike-goodwin/connect-azuretables.svg?label=%E2%98%85" class="badge"> connect-azuretables</a> An <a href="https://azure.microsoft.com/en-gb/services/storage/tables/">Azure Table Storage</a>-based session store.</p>
<p><a href="https://www.npmjs.com/package/connect-couchbase"><img src="https://img.shields.io/github/stars/christophermina/connect-couchbase.svg?label=%E2%98%85" class="badge"> connect-couchbase</a> A <a href="http://www.couchbase.com/">couchbase</a>-based session store.</p>
<p><a href="https://www.npmjs.com/package/connect-datacache"><img src="https://img.shields.io/github/stars/adriantanasa/connect-datacache.svg?label=%E2%98%85" class="badge"> connect-datacache</a> An <a href="http://www.ibm.com/cloud-computing/bluemix/">IBM Bluemix Data Cache</a>-based session store.</p>
<p><a href="https://www.npmjs.com/package/connect-db2"><img src="https://img.shields.io/github/stars/wallali/connect-db2.svg?label=%E2%98%85" class="badge"> connect-db2</a> An IBM DB2-based session store built using <a href="https://www.npmjs.com/package/ibm_db">ibm_db</a> module.</p>
<p><a href="https://github.com/ca98am79/connect-dynamodb"><img src="https://img.shields.io/github/stars/ca98am79/connect-dynamodb.svg?label=%E2%98%85" class="badge"> connect-dynamodb</a> A DynamoDB-based session store.</p>
<p><a href="https://www.npmjs.com/package/connect-loki"><img src="https://img.shields.io/github/stars/Requarks/connect-loki.svg?label=%E2%98%85" class="badge"> connect-loki</a> A Loki.js-based session store.</p>
<p><a href="https://www.npmjs.com/package/connect-ml"><img src="https://img.shields.io/github/stars/bluetorch/connect-ml.svg?label=%E2%98%85" class="badge"> connect-ml</a> A MarkLogic Server-based session store.</p>
<p><a href="https://www.npmjs.com/package/connect-mssql"><img src="https://img.shields.io/github/stars/patriksimek/connect-mssql.svg?label=%E2%98%85" class="badge"> connect-mssql</a> A SQL Server-based session store.</p>
<p><a href="https://www.npmjs.com/package/connect-monetdb"><img src="https://img.shields.io/github/stars/MonetDB/npm-connect-monetdb.svg?label=%E2%98%85" class="badge"> connect-monetdb</a> A MonetDB-based session store.</p>
<p><a href="https://www.npmjs.com/package/connect-mongo"><img src="https://img.shields.io/github/stars/kcbanner/connect-mongo.svg?label=%E2%98%85" class="badge"> connect-mongo</a> A MongoDB-based session store.</p>
<p><a href="https://www.npmjs.com/package/connect-mongodb-session"><img src="https://img.shields.io/github/stars/mongodb-js/connect-mongodb-session.svg?label=%E2%98%85" class="badge"> connect-mongodb-session</a> Lightweight MongoDB-based session store built and maintained by MongoDB.</p>
<p><a href="https://www.npmjs.com/package/connect-pg-simple"><img src="https://img.shields.io/github/stars/voxpelli/node-connect-pg-simple.svg?label=%E2%98%85" class="badge"> connect-pg-simple</a> A PostgreSQL-based session store.</p>
<p><a href="https://www.npmjs.com/package/connect-redis"><img src="https://img.shields.io/github/stars/tj/connect-redis.svg?label=%E2%98%85" class="badge"> connect-redis</a> A Redis-based session store.</p>
<p><a href="https://www.npmjs.com/package/connect-memcached"><img src="https://img.shields.io/github/stars/balor/connect-memcached.svg?label=%E2%98%85" class="badge"> connect-memcached</a> A memcached-based session store.</p>
<p><a href="https://www.npmjs.com/package/connect-session-knex"><img src="https://img.shields.io/github/stars/llambda/connect-session-knex.svg?label=%E2%98%85" class="badge"> connect-session-knex</a> A session store using
<a href="http://knexjs.org/">Knex.js</a>, which is a SQL query builder for PostgreSQL, MySQL, MariaDB, SQLite3, and Oracle.</p>
<p><a href="https://www.npmjs.com/package/connect-session-sequelize"><img src="https://img.shields.io/github/stars/mweibel/connect-session-sequelize.svg?label=%E2%98%85" class="badge"> connect-session-sequelize</a> A session store using
<a href="http://sequelizejs.com/">Sequelize.js</a>, which is a Node.js / io.js ORM for PostgreSQL, MySQL, SQLite and MSSQL.</p>
<p><a href="https://www.npmjs.com/package/express-mysql-session"><img src="https://img.shields.io/github/stars/chill117/express-mysql-session.svg?label=%E2%98%85" class="badge"> express-mysql-session</a> A session store using native
<a href="https://www.mysql.com/">MySQL</a> via the <a href="https://github.com/felixge/node-mysql">node-mysql</a> module.</p>
<p><a href="https://www.npmjs.com/package/express-sessions"><img src="https://img.shields.io/github/stars/konteck/express-sessions.svg?label=%E2%98%85" class="badge"> express-sessions</a>: A session store supporting both MongoDB and Redis.</p>
<p><a href="https://www.npmjs.com/package/connect-sqlite3"><img src="https://img.shields.io/github/stars/rawberg/connect-sqlite3.svg?label=%E2%98%85" class="badge"> connect-sqlite3</a> A <a href="https://github.com/mapbox/node-sqlite3">SQLite3</a> session store modeled after the TJ's <code>connect-redis</code> store.</p>
<p><a href="https://www.npmjs.com/package/documentdb-session"><img src="https://img.shields.io/github/stars/dwhieb/documentdb-session.svg?label=%E2%98%85" class="badge"> documentdb-session</a> A session store for Microsoft Azure's <a href="https://azure.microsoft.com/en-us/services/documentdb/">DocumentDB</a> NoSQL database service.</p>
<p><a href="https://www.npmjs.com/package/express-nedb-session"><img src="https://img.shields.io/github/stars/louischatriot/express-nedb-session.svg?label=%E2%98%85" class="badge"> express-nedb-session</a> A NeDB-based session store.</p>
<p><a href="https://www.npmjs.com/package/express-session-level"><img src="https://img.shields.io/github/stars/tgohn/express-session-level.svg?label=%E2%98%85" class="badge"> express-session-level</a> A <a href="https://github.com/Level/levelup">LevelDB</a> based session store.</p>
<p><a href="https://www.npmjs.com/package/express-etcd"><img src="https://img.shields.io/github/stars/gildean/express-etcd.svg?label=%E2%98%85" class="badge"> express-etcd</a> An <a href="https://github.com/stianeikeland/node-etcd">etcd</a> based session store.</p>
<p><a href="https://www.npmjs.com/package/hazelcast-store"><img src="https://img.shields.io/github/stars/jackspaniel/hazelcast-store.svg?label=%E2%98%85" class="badge"> hazelcast-store</a> A Hazelcast-based session store built on the <a href="https://www.npmjs.com/package/hazelcast-client">Hazelcast Node Client</a>.</p>
<p><a href="https://www.npmjs.com/package/level-session-store"><img src="https://img.shields.io/github/stars/scriptollc/level-session-store.svg?label=%E2%98%85" class="badge"> level-session-store</a> A LevelDB-based session store.</p>
<p><a href="https://www.npmjs.com/package/medea-session-store"><img src="https://img.shields.io/github/stars/BenjaminVadant/medea-session-store.svg?label=%E2%98%85" class="badge"> medea-session-store</a> A Medea-based session store.</p>
<p><a href="https://www.npmjs.com/package/mssql-session-store"><img src="https://img.shields.io/github/stars/jwathen/mssql-session-store.svg?label=%E2%98%85" class="badge"> mssql-session-store</a> A SQL Server-based session store.</p>
<p><a href="https://www.npmjs.com/package/nedb-session-store"><img src="https://img.shields.io/github/stars/JamesMGreene/nedb-session-store.svg?label=%E2%98%85" class="badge"> nedb-session-store</a> An alternate NeDB-based (either in-memory or file-persisted) session store.</p>
<p><a href="https://www.npmjs.com/package/sequelstore-connect"><img src="https://img.shields.io/github/stars/MattMcFarland/sequelstore-connect.svg?label=%E2%98%85" class="badge"> sequelstore-connect</a> A session store using <a href="http://sequelizejs.com/">Sequelize.js</a>.</p>
<p><a href="https://www.npmjs.com/package/session-file-store"><img src="https://img.shields.io/github/stars/valery-barysok/session-file-store.svg?label=%E2%98%85" class="badge"> session-file-store</a> A file system-based session store.</p>
<p><a href="https://www.npmjs.com/package/session-rethinkdb"><img src="https://img.shields.io/github/stars/llambda/session-rethinkdb.svg?label=%E2%98%85" class="badge"> session-rethinkdb</a> A <a href="http://rethinkdb.com/">RethinkDB</a>-based session store.</p>
<h2 id="user-content-example" class="deep-link"><a href="#example">Example</a></h2>
<p>A simple example using <code>express-session</code> to store page views for a user.</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>var</span></span><span>&nbsp;express&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>express</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>var</span></span><span>&nbsp;parseurl&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>parseurl</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>var</span></span><span>&nbsp;session&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>express-session</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>var</span></span><span>&nbsp;app&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>express</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>app</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>use</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta function-call js"><span class="entity name function js"><span>session</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span>&nbsp;&nbsp;secret</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>keyboard&nbsp;cat</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span>&nbsp;&nbsp;resave</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span>&nbsp;&nbsp;saveUninitialized</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="meta function-call js"><span class="meta js"><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>app</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>use</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable function js"><span>req</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable function js"><span>res</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable function js"><span>next</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function begin curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="storage type js"><span>var</span></span><span>&nbsp;views&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>req</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>session</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>views</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator logical js"><span>!</span></span><span>views</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;&nbsp;&nbsp;views&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>req</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>session</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>views</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;get&nbsp;the&nbsp;url&nbsp;pathname</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="storage type js"><span>var</span></span><span>&nbsp;pathname&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>parseurl</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>req</span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="meta delimiter period js"><span>.</span></span><span class="support constant js"><span>pathname</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;count&nbsp;the&nbsp;views</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;views</span><span class="meta brace square js"><span>[</span></span><span>pathname</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>views</span><span class="meta brace square js"><span>[</span></span><span>pathname</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>next</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation definition function end curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>app</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>get</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>/foo</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable function js"><span>req</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable function js"><span>res</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable function js"><span>next</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function begin curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>res</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>send</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>you&nbsp;viewed&nbsp;this&nbsp;page&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="variable other object js"><span>req</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>session</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>views</span></span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>/foo</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>&nbsp;times</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation definition function end curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>app</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>get</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>/bar</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable function js"><span>req</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable function js"><span>res</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable function js"><span>next</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function begin curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>res</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>send</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>you&nbsp;viewed&nbsp;this&nbsp;page&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="variable other object js"><span>req</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>session</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>views</span></span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>/bar</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>&nbsp;times</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation definition function end curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre></div>
<h2 id="user-content-license" class="deep-link"><a href="#license">License</a></h2>
<p><a href="https://github.com/expressjs/session/blob/master/LICENSE">MIT</a></p>

  </div>
</body>
</html>